# 'CodeGeneration' object (entity-driven) - YAML/JSON

The `CodeGeneration` object defines global properties that are used to drive the underlying entity-driven code generation.

<br/>

## Example

A YAML configuration [example](../samples/My.Hr/My.Hr.CodeGen/entity.beef.yaml) is as follows:
``` yaml
refDataNamespace: My.Hr.Common.Entities
refDataText: true
eventSubjectRoot: My
eventActionFormat: PastTense
entities:
```

<br/>

## Property categories
The `CodeGeneration` object supports a number of properties that control the generated code output. These properties are separated into a series of logical categories. The properties with a bold name are those that are more typically used (considered more important).

Category | Description
-|-
[`RefData`](#RefData) | Provides the _Reference Data_ configuration.
[`Entity`](#Entity) | Provides the _Entity class_ configuration.
[`WebApi`](#WebApi) | Provides the _Web API (Controller)_ configuration.
[`Manager`](#Manager) | Provides the _Manager-layer_ configuration.
[`DataSvc`](#DataSvc) | Provides the _Data Services-layer_ configuration.
[`Data`](#Data) | Provides the generic _Data-layer_ configuration.
[`Database`](#Database) | Provides the _Database Data-layer_ configuration.
[`EntityFramework`](#EntityFramework) | Provides the _Entity Framewotrk (EF) Data-layer_ configuration.
[`Cosmos`](#Cosmos) | Provides the _CosmosDB Data-layer_ configuration.
[`OData`](#OData) | Provides the _OData Data-layer_ configuration.
[`gRPC`](#gRPC) | Provides the _gRPC_ configuration.
[`Path`](#Path) | Provides the _Path (Directory)_ configuration for the generated artefacts.
[`Namespace`](#Namespace) | Provides the _.NET Namespace_ configuration for the generated artefacts.
[`Collections`](#Collections) | Provides related child (hierarchical) configuration.

<br/>

## RefData
Provides the _Reference Data_ configuration.

Property | Description
-|-
**`refDataNamespace`** | The namespace for the Reference Data entities (adds as a c# `using` statement) where the `Entity.EntityScope` property configuration is `Common`.
**`refDataText`** | Indicates whether a corresponding `Text` property is added when generating a Reference Data `Property` for an `Entity`. This is used where serializing within the Web API `Controller` and the `ExecutionContext.IsRefDataTextSerializationEnabled` is set to `true` (which is automatically set where the url contains `$text=true`).
**`refDataWebApiRoute`** | The `RouteAtttribute` for the Reference Data Web API controller required for named pre-fetching.
`refDataCache` | The cache used for the ReferenceData providers. Valid options are: `ReferenceDataCache`, `ReferenceDataMultiTenantCache`. Defaults to `ReferenceDataCache`. A value of `ReferenceDataCache` specifies a single-tenant cache; otherwise, `ReferenceDataMultiTenantCache` for a multi-tenant cache leverageing the `ExecutionContext.TenantId`.
`refDataAppendToNamespace` | The Reference Data entity namespace appended to end of the standard `company.appname.Common.Entities.{AppendToNamespace}`. Defaults to `null`; being nothing to append.
`refDataBusNamespace` | The namespace for the Reference Data entities (adds as a c# `using` statement) where the `Entity.EntityScope` property configuration is `Business`.

<br/>

## Entity
Provides the _Entity class_ configuration.

Property | Description
-|-
`jsonSerializer` | The JSON Serializer to use for JSON property attribution. Valid options are: `None`, `Newtonsoft`. Defaults to `Newtonsoft`. This can be overridden within the `Entity`(s).
`etagJsonName` | The default JSON name for the `ETag` property. Valid options are: `etag`, `eTag`, `_etag`, `_eTag`, `ETag`. Defaults to `etag`. Note that the `JsonName` can be set individually per property where required.
`entityUsing` | The namespace for the non Reference Data entities (adds as a c# <c>using</c> statement). Valid options are: `Common`, `Business`, `All`, `None`. Defaults to `Common` which will add `.Common.Entities`. Otherwise, `Business` to add `.Business.Entities`, `All` to add both, and `None` to exclude any.
`usingNamespace1` | The additional Namespace using statement to the added to the generated `Entity` code. Typically used where referening a `Type` from a Namespace that is not generated by default.
`usingNamespace2` | The additional Namespace using statement to the added to the generated `Entity` code. Typically used where referening a `Type` from a Namespace that is not generated by default.
`usingNamespace3` | The additional Namespace using statement to the added to the generated `Entity` code. Typically used where referening a `Type` from a Namespace that is not generated by default.

<br/>

## WebApi
Provides the _Web API (Controller)_ configuration.

Property | Description
-|-
`webApiAuthorize` | The authorize attribute value to be used for the corresponding entity Web API controller; generally either `Authorize` or `AllowAnonymous`. This can be overridden within the `Entity`(s) and/or their corresponding `Operation`(s).
`appBasedAgentArgs` | Indicates whether to create and use a domain-specific `WebApi.WebApiAgentArgs` to simplify dependency injection usage.
`webApiAutoLocation` | Indicates whether the HTTP Response Location Header route (`Operation.WebApiLocation`) is automatically inferred. This will automatically set the `Operation.WebApiLocation` for an `Operation` named `Create` where there is a corresponding named `Get`. This can be overridden within the `Entity`(s).

<br/>

## Manager
Provides the _Manager-layer_ configuration.

Property | Description
-|-
`validatorLayer` | The namespace for the Reference Data entities (adds as a c# `using` statement). Valid options are: `Business`, `Common`. Defaults to `Business`. A value of `Business` indicates that the Validators will be defined within the `Business` namespace/assembly; otherwise, defined within the `Common` namespace/assembly.

<br/>

## DataSvc
Provides the _Data Services-layer_ configuration.

Property | Description
-|-
**`eventPublish`** | Indicates whether to add logic to publish an event on the successful completion of the `DataSvc` layer invocation for a `Create`, `Update` or `Delete` operation. Defaults to `true`. Used to enable the sending of messages to the likes of EventHub, Service Broker, SignalR, etc. This can be overridden within the `Entity`(s).
**`eventSubjectRoot`** | The root for the event Subject name by prepending to all event subject names. Used to enable the sending of messages to the likes of EventHub, Service Broker, SignalR, etc. This can be overridden within the `Entity`(s).
`eventSubjectFormat` | The default formatting for the Subject when an Event is published. Valid options are: `NameOnly`, `NameAndKey`. Defaults to `NameAndKey` (being the event subject name appended with the corresponding unique key.)`.
**`eventActionFormat`** | The formatting for the Action when an Event is published. Valid options are: `None`, `UpperCase`, `PastTense`, `PastTenseUpperCase`. Defaults to `None` (no formatting required)`.
**`eventTransaction`** | Indicates whether a `System.TransactionScope` should be created and orchestrated at the `DataSvc`-layer whereever generating event publishing logic. Usage will force a rollback of any underlying data transaction (where the provider supports TransactionScope) on failure, such as an `EventPublish` error. This is by no means implying a Distributed Transaction (DTC) should be invoked; this is only intended for a single data source that supports a TransactionScope to guarantee reliable event publishing. Defaults to `false`. This essentially defaults the `Entity.EventTransaction` where not otherwise specified.

<br/>

## Data
Provides the generic _Data-layer_ configuration.

Property | Description
-|-
`refDataDefaultMapperConverter` | The default Reference Data property `Converter` used by the generated `Mapper`(s) where not specifically defined. Valid options are: `ReferenceDataCodeConverter`, `ReferenceDataInt32IdConverter`, `ReferenceDataNullableInt32IdConverter`, `ReferenceDataGuidIdConverter`, `ReferenceDataNullableGuidIdConverter`. Defaults to `ReferenceDataCodeConverter`.
`dataUsingNamespace` | The additional Namespace using statement to the added to the generated `Data` code.

<br/>

## Database
Provides the _Database Data-layer_ configuration.

Property | Description
-|-
**`databaseName`** | The .NET database interface name (used where `Operation.AutoImplement` is `Database`). Defaults to `IDatabase`. This can be overridden within the `Entity`(s).
**`databaseSchema`** | The default database schema name. Defaults to `dbo`.
`databaseUsingNamespace` | The additional Namespace using statement to the added to the generated `Data` code where `Operation.AutoImplement` is `Database`.

<br/>

## EntityFramework
Provides the _Entity Framewotrk (EF) Data-layer_ configuration.

Property | Description
-|-
`entityFrameworkName` | The .NET Entity Framework interface name used where `Operation.AutoImplement` is `EntityFramework`. Defaults to `IEfDb`. This can be overridden within the `Entity`(s).
`entityFrameworkUsingNamespace` | The additional Namespace using statement to the added to the generated `Data` code where `Operation.AutoImplement` is `EntityFramework`.

<br/>

## Cosmos
Provides the _CosmosDB Data-layer_ configuration.

Property | Description
-|-
**`cosmosName`** | The .NET Entity Framework interface name used where `Operation.AutoImplement` is `Cosmos`. Defaults to `ICosmosDb`. This can be overridden within the `Entity`(s).
`cosmosUsingNamespace` | additional Namespace using statement to the added to the generated `Data` code where `Operation.AutoImplement` is `Cosmos`.

<br/>

## OData
Provides the _OData Data-layer_ configuration.

Property | Description
-|-
**`odataName`** | The .NET OData interface name used where `Operation.AutoImplement` is `OData`. Defaults to `IOData`. This can be overridden within the `Entity`(s).
`odataUsingNamespace` | additional Namespace using statement to the added to the generated `Data` code where `Operation.AutoImplement` is `OData`.

<br/>

## gRPC
Provides the _gRPC_ configuration.

Property | Description
-|-
**`grpc`** | Indicates whether gRPC support (more specifically service-side) is required. gRPC support is an explicit opt-in model. Must be set to `true` for any of the subordinate gRPC capabilities to be code-generated. Will require each `Entity`, and corresponding `Property` and `Operation` to be opted-in specifically.

<br/>

## Path
Provides the _Path (Directory)_ configuration for the generated artefacts.

Property | Description
-|-
`pathBase` | The base path (directory) prefix for the artefacts; other `Path*` properties append to this value when they are not specifically overridden. Defaults to `Company` (runtime parameter) + `.` + `AppName` (runtime parameter). For example `Beef.Demo`.
`pathCommon` | The path (directory) for the Database-related artefacts. Defaults to `PathBase` + `.Common` (literal). For example `Beef.Demo.Common`.
`pathBusiness` | The path (directory) for the Business-related (.NET) artefacts. Defaults to `PathBase` + `.Business` (literal). For example `Beef.Demo.Business`.
`pathApi` | The path (directory) for the API-related (.NET) artefacts. Defaults to `PathBase` + `.` + `ApiName` (runtime parameter). For example `Beef.Demo.Api`.

<br/>

## Namespace
Provides the _.NET Namespace_ configuration for the generated artefacts.

Property | Description
-|-
`namespaceBase` | The base Namespace (root) for the .NET artefacts. Defaults to `Company` (runtime parameter) + `.` + `AppName` (runtime parameter). For example `Beef.Demo`.
`namespaceCommon` | The Namespace (root) for the Common-related .NET artefacts. Defaults to `NamespaceBase` + `.Common` (literal). For example `Beef.Demo.Common`.
`namespaceBusiness` | The Namespace (root) for the Business-related .NET artefacts. Defaults to `NamespaceBase` + `.Business` (literal). For example `Beef.Demo.Business`.
`namespaceApi` | The Namespace (root) for the Api-related .NET artefacts. Defaults to `NamespaceBase` + `.` + `ApiName` (runtime parameter). For example `Beef.Demo.Api`.

<br/>

## Collections
Provides related child (hierarchical) configuration.

Property | Description
-|-
**`entities`** | The corresponding [`Entity`](Entity-Entity-Config.md) collection. An `Entity` object provides the primary configuration for an entity, its properties and operations.

<br/>

<sub><sup>Note: This markdown file is generated; any changes will be lost.</sup></sub>
