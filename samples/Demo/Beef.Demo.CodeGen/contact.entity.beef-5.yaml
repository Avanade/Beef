entities:
  # Entity with no etag or changelog
- { name: Contact, collection: true, collectionResult: true, isInitialOverride: false, validator: ContactValidator, webApiRoutePrefix: api/v1/contacts, webApiAuthorize: AllowAnonymous, webApiCtorParams: [ Microsoft.Extensions.Configuration.IConfiguration^Config ], eventPublish: Data, eventOutbox: Database, get: true, create: true, update: true, patch: true, delete: true, getAll: true, getByQuery: true, managerCleanUp: false, autoImplement: EntityFramework, databaseSchema: Demo, entityFrameworkModel: EfModel.Contact, entityFrameworkName: IEfDb^SqlEf,
    properties: [
      { name: Id, text: '{{Contact}} identifier', type: Guid, primaryKey: true, dataAutoGenerated: true, dataName: ContactId },
      { name: FirstName, type: string },
      { name: LastName, type: string },
      { name: Status, type: ^Status, dataName: StatusCode, refDataText: Always, refDataTextName: StatusDescription },
      { name: InternalCode, type: string, internalOnly: true, entityFrameworkMapper: Ignore },
      { name: Communications, type: ContactCommCollection, dataName: Comms, dataConverter: 'ObjectToJsonConverter{T}', entityFrameworkMapper: Set }
    ],
    operations: [
      { name: RaiseEvent, type: Custom, webApiRoute: raise, eventPublish: Data, eventOutbox: Database,
        parameters: [
          { name: throwError, text: throw a DivideByZero exception, type: bool }
        ]
      }
    ]
  }

- { name: ContactComm, collection: true, collectionType: Dictionary,
    properties: [
      { name: Value },
      { name: IsPreferred, type: bool, text: Communication is the preferred (only one) }
    ]
  }