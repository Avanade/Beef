/*
 * This file is automatically generated; any changes will be lost. 
 */

#nullable enable
#pragma warning disable IDE0079, IDE0001, IDE0005, IDE0044, CA1034, CA1052, CA1056, CA1819, CA2227, CS0649

using System;
using System.Net;
using System.Threading.Tasks;
using Beef;
using Beef.Grpc;
using Grpc.Core;
using Microsoft.AspNetCore.Authorization;
using Beef.Demo.Business;
using Beef.Demo.Common.Grpc;
using Beef.Demo.Common.Grpc.Proto;
using RefDataNamespace = Beef.Demo.Common.Entities;

namespace Beef.Demo.Api.Grpc
{
    /// <summary>
    /// Provides the <see cref="Robot"/> gRPC Server functionality.
    /// </summary>
    public partial class RobotService : RobotGrpcService.RobotGrpcServiceBase
    {
        private readonly IRobotManager _manager;

        /// <summary>
        /// Initializes a new instance of the <see cref="RobotService"/> class.
        /// </summary>
        /// <param name="manager">The <see cref="IRobotManager"/>.</param>
        public RobotService(IRobotManager manager)
            { _manager = Check.NotNull(manager, nameof(manager)); ServiceCtor(); }

        partial void ServiceCtor(); // Enables additional functionality to be added to the constructor.

        /// <summary>
        /// Gets the specified <see cref="Robot"/>.
        /// </summary>
        /// <param name="request">The <see cref="RobotGetRequest"/>.</param>
        /// <param name="context">The <see cref="ServerCallContext"/>.</param>
        /// <returns>The <see cref="Robot"/>.</returns>
        public override Task<Robot> Get(RobotGetRequest request, ServerCallContext context)
        {
            return new GrpcService<Robot>(context, async () =>
            {
                var __req = request ?? new RobotGetRequest();
                var __result = await _manager.GetAsync(Transformers.GuidToStringConverter.ConvertToSrce(__req.Id));
                return Transformers.Robot.MapToDest(__result!)!;
            }, operationType: OperationType.Read, statusCode: HttpStatusCode.OK, alternateStatusCode: HttpStatusCode.NotFound).ExecuteAsync();
        }

        /// <summary>
        /// Creates a new <see cref="Robot"/>.
        /// </summary>
        /// <param name="request">The <see cref="RobotCreateRequest"/>.</param>
        /// <param name="context">The <see cref="ServerCallContext"/>.</param>
        /// <returns>The <see cref="Robot"/>.</returns>
        public override Task<Robot> Create(RobotCreateRequest request, ServerCallContext context)
        {
            return new GrpcService<Robot>(context, async () =>
            {
                var __req = request ?? new RobotCreateRequest();
                var __result = await _manager.CreateAsync(Transformers.Robot.MapToSrce(__req.Value)!);
                return Transformers.Robot.MapToDest(__result!)!;
            }, operationType: OperationType.Create, statusCode: HttpStatusCode.Created, alternateStatusCode: null).ExecuteAsync();
        }

        /// <summary>
        /// Updates an existing <see cref="Robot"/>.
        /// </summary>
        /// <param name="request">The <see cref="RobotUpdateRequest"/>.</param>
        /// <param name="context">The <see cref="ServerCallContext"/>.</param>
        /// <returns>The <see cref="Robot"/>.</returns>
        public override Task<Robot> Update(RobotUpdateRequest request, ServerCallContext context)
        {
            return new GrpcService<Robot>(context, async () =>
            {
                var __req = request ?? new RobotUpdateRequest();
                var __result = await _manager.UpdateAsync(Transformers.Robot.MapToSrce(__req.Value)!, Transformers.GuidToStringConverter.ConvertToSrce(__req.Id));
                return Transformers.Robot.MapToDest(__result!)!;
            }, operationType: OperationType.Update, statusCode: HttpStatusCode.OK, alternateStatusCode: null).ExecuteAsync();
        }

        /// <summary>
        /// Deletes the specified <see cref="Robot"/>.
        /// </summary>
        /// <param name="request">The <see cref="RobotDeleteRequest"/>.</param>
        /// <param name="context">The <see cref="ServerCallContext"/>.</param>
        /// <returns>The <see cref="Google.Protobuf.WellKnownTypes.Empty"/>.</returns>
        public override Task<Google.Protobuf.WellKnownTypes.Empty> Delete(RobotDeleteRequest request, ServerCallContext context)
        {
            return new GrpcService<Google.Protobuf.WellKnownTypes.Empty>(context, async () =>
            {
                var __req = request ?? new RobotDeleteRequest();
                await _manager.DeleteAsync(Transformers.GuidToStringConverter.ConvertToSrce(__req.Id));
                return new Google.Protobuf.WellKnownTypes.Empty();
            }, operationType: OperationType.Delete, statusCode: HttpStatusCode.NoContent).ExecuteAsync();
        }

        /// <summary>
        /// Gets the <see cref="RobotCollectionResult"/> that contains the items that match the selection criteria.
        /// </summary>
        /// <param name="request">The <see cref="RobotGetByArgsRequest"/>.</param>
        /// <param name="context">The <see cref="ServerCallContext"/>.</param>
        /// <returns>The <see cref="RobotCollectionResult"/>.</returns>
        public override Task<RobotCollectionResult> GetByArgs(RobotGetByArgsRequest request, ServerCallContext context)
        {
            return new GrpcService<RobotCollectionResult>(context, async () =>
            {
                var __req = request ?? new RobotGetByArgsRequest();
                var __result = await _manager.GetByArgsAsync(Transformers.RobotArgs.MapToSrce(__req.Args)!, __req.Paging == null ? new Entities.PagingArgs() : Transformers.PagingArgsToPagingArgsConverter.ConvertToSrce(__req.Paging));
                return Transformers.RobotCollectionResult.MapToDest(__result!)!;
            }, operationType: OperationType.Read, statusCode: HttpStatusCode.OK, alternateStatusCode: HttpStatusCode.NoContent).ExecuteAsync();
        }
    }
}

#pragma warning restore IDE0079, IDE0001, IDE0005, IDE0044, CA1034, CA1052, CA1056, CA1819, CA2227, CS0649
#nullable restore