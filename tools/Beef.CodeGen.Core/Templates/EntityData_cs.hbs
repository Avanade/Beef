{{! Copyright (c) Avanade. Licensed under the MIT License. See https://github.com/Avanade/Beef }}
/*
 * This file is automatically generated; any changes will be lost. 
 */

#nullable enable
#pragma warning disable

namespace {{Root.NamespaceBusiness}}.Data
{
    /// <summary>
    /// Provides the {{{EntityNameSeeComments}}} data access.
    /// </summary>
    public partial class {{Name}}Data{{#if GenericWithT}}<T>{{/if}}{{#ifne Operations.Count 0}} : I{{Name}}Data{{#if GenericWithT}}<T>{{/if}}{{/ifne}}
    {
{{#ifne Operations.Count 0}}
  {{#each DataCtorParameters}}
        private readonly {{Type}} {{PrivateName}};
  {{/each}}
  {{#if DataExtensionsRequired}}
    {{#if HasDataExtensions}}

        #region Extensions

    {{/if}}
    {{#each DataOperations}}
      {{#ifeq Type 'GetColl'}}
        {{#ifeq AutoImplement 'Database'}}
        private Action<DatabaseParameterCollection{{#each CoreDataParameters}}, {{{ParameterType}}}{{/each}}>? {{PrivateName}}OnQuery;
        {{/ifeq}}
        {{#ifeq AutoImplement 'EntityFramework'}}
        private Func<IQueryable<{{Parent.EntityFrameworkModel}}>, {{#each CoreDataParameters}}{{{ParameterType}}}, {{/each}}IQueryable<{{Parent.EntityFrameworkModel}}>>? {{PrivateName}}OnQuery;
        {{/ifeq}}   
        {{#ifeq AutoImplement 'Cosmos'}}
          {{#ifval Parent.CosmosValueContainer}}
        private Func<IQueryable<CosmosDbValue<{{Parent.CosmosModel}}>>, {{#each CoreDataParameters}}{{{ParameterType}}}, {{/each}}IQueryable<CosmosDbValue<{{Parent.CosmosModel}}>>>? {{PrivateName}}OnQuery;
          {{else}}
        private Func<IQueryable<{{Parent.CosmosModel}}>, {{#each CoreDataParameters}}{{{ParameterType}}}, {{/each}}IQueryable<{{Parent.CosmosModel}}>>? {{PrivateName}}OnQuery;
          {{/ifval}}
        {{/ifeq}}  
        {{#ifeq AutoImplement 'OData'}}
        private Func<Soc.IBoundClient<{{Parent.ODataModel}}>, {{#each CoreDataParameters}}{{{ParameterType}}}, {{/each}}Soc.IBoundClient<{{Parent.ODataModel}}>>? {{PrivateName}}OnQuery;
        {{/ifeq}} 
      {{/ifeq}}
      {{#if DataExtensions}}
        {{#ifne AutoImplement 'None'}}
        private Func<{{#each PagingLessDataParameters}}{{{ParameterType}}}, {{/each}}{{#if Root.CancellationToken}}CancellationToken, {{/if}}Task>? {{PrivateName}}OnBeforeAsync;
        private Func<{{#if HasReturnValue}}{{OperationReturnType}}, {{/if}}{{#each CoreDataParameters}}{{{ParameterType}}}, {{/each}}{{#if Root.CancellationToken}}CancellationToken, {{/if}}Task>? {{PrivateName}}OnAfterAsync;
        {{/ifne}}
        private Action<Exception>? {{PrivateName}}OnException;
      {{/if}}
    {{#if HasDataExtensions}}

    {{/if}}
    {{/each}}
    {{#if HasDataExtensions}}

        #endregion
    {{/if}}
  {{/if}}

        /// <summary>
        /// Initializes a new instance of the <see cref="{{Name}}Data"/> class.
        /// </summary>
  {{#each DataCtorParameters}}
        /// <param name="{{ArgumentName}}">{{{SummaryText}}}</param>
  {{/each}}
        {{lower DataCtor}} {{Name}}Data({{#each DataCtorParameters}}{{#unless @first}}, {{/unless}}{{Type}} {{ArgumentName}}{{/each}})
{{#ifle DataCtorParameters.Count 3}}
            { {{#each DataCtorParameters}}{{PrivateName}} = {{ArgumentName}} ?? throw new ArgumentNullException(nameof({{ArgumentName}})); {{/each}}{{Name}}DataCtor(); }
{{else}}
        {
  {{#each DataCtorParameters}}
            {{PrivateName}} = {{ArgumentName}} ?? throw new ArgumentNullException(nameof({{ArgumentName}}));
  {{/each}}
            {{Name}}DataCtor();
        }
{{/ifle}}

        partial void {{Name}}DataCtor(); // Enables additional functionality to be added to the constructor.
  {{#each DataOperations}}

        /// <summary>
        /// {{{SummaryText}}}
        /// </summary>
    {{#each DataParameters}}
        /// <param name="{{ArgumentName}}">{{{SummaryText}}}</param>
    {{/each}}
    {{#if Root.CancellationToken}}
        /// <param name="cancellationToken">The <see cref="CancellationToken"/>.</param>
    {{/if}}
    {{#if HasReturnValue}}
        /// <returns>{{{ReturnText}}}</returns>
    {{/if}}
        public {{{OperationTaskReturnType}}} {{Name}}Async({{#each DataParameters}}{{{ParameterType}}} {{ArgumentName}}{{#unless @last}}, {{/unless}}{{/each}}{{#if Root.CancellationToken}}, CancellationToken cancellationToken = default{{/if}}) => {{#if IsManualShorthand}}{{#if DataExtensions}}DataInvoker.Current.InvokeAsync(this, {{#if Root.CancellationToken}}ct{{else}}_{{/if}} => {{Name}}OnImplementationAsync({{#each DataParameters}}{{#unless @first}}, {{/unless}}{{#if IsValueArg}}value ?? throw new ArgumentNullException(nameof(value)){{else}}{{ArgumentName}}{{/if}}{{/each}}{{#if Root.CancellationToken}}, ct{{/if}}), new BusinessInvokerArgs { ExceptionHandler = {{PrivateName}}OnException{{#if DataTransaction}}, IncludeTransactionScope = true{{/if}}{{#ifeq EventPublish 'Data'}}, EventPublisher = _events{{/ifeq}} }{{#if Root.CancellationToken}}, cancellationToken{{/if}});{{else}}DataInvoker.Current.InvokeAsync(this, {{#if Root.CancellationToken}}ct => {{else}}_ => {{/if}}{{Name}}OnImplementationAsync({{#each DataParameters}}{{#if IsValueArg}}value ?? throw new ArgumentNullException(nameof(value)){{else}}{{ArgumentName}}{{/if}}{{#unless @last}}, {{/unless}}{{/each}}{{#if Root.CancellationToken}}, ct{{/if}}){{#if DataTransaction}}, new BusinessInvokerArgs { IncludeTransactionScope = true{{#ifeq EventPublish 'Data'}}, EventPublisher = _events{{/ifeq}} }{{else}}{{#ifeq EventPublish 'Data'}}, new BusinessInvokerArgs { EventPublisher = _events }{{/ifeq}}{{/if}}{{#if Root.CancellationToken}}, cancellationToken{{/if}});{{/if}}{{/if}}{{#unless IsManualShorthand}}DataInvoker.Current.InvokeAsync(this, {{#ifne Type 'GetColl' 'Get'}}async {{else}}{{#if DataExtensions}}async {{else}}{{#ifeq AutoImplement 'HttpAgent'}}async {{/ifeq}}{{/if}}{{/ifne}}{{#if Root.CancellationToken}}ct =>{{else}}_ =>{{/if}}{{/unless}}
    {{#unless IsManualShorthand}}
        {
      {{#ifeq AutoImplement 'OData'}}
            var __dataArgs = ODataArgs.Create(_mapper{{#if Paging}}, __result.Paging!{{/if}}{{#ifval ODataCollectionName}}, "{{ODataCollectionName}}"{{/ifval}});
      {{/ifeq}}
      {{#if DataExtensions}}
            await ({{PrivateName}}OnBeforeAsync?.Invoke({{#each PagingLessDataParameters}}{{{ArgumentName}}}{{#unless @last}}, {{/unless}}{{/each}}{{#if Root.CancellationToken}}, ct{{/if}}) ?? Task.CompletedTask).ConfigureAwait(false);
      {{/if}}
      {{#ifeq AutoImplement 'None'}}
            {{#if HasReturnValue}}var __result = {{/if}}await {{Name}}OnImplementationAsync({{#each DataParameters}}{{#if IsValueArg}}value ?? throw new ArgumentNullException(nameof(value)){{else}}{{ArgumentName}}{{/if}}{{#unless @last}}, {{/unless}}{{/each}}{{#if Root.CancellationToken}}, ct{{/if}}).ConfigureAwait(false);
      {{/ifeq}}
      {{#ifeq AutoImplement 'Database'}}
        {{#ifeq Type 'GetColl'}}
            {{#if DataExtensions}}var __result = await{{else}}return{{/if}} {{DataArgs.Name}}.StoredProcedure("[{{Parent.DatabaseSchema}}].[{{DatabaseStoredProc}}]").Query({{DataEntityMapper}}.Default, p => {{PrivateName}}OnQuery?.Invoke(p{{#each CoreDataParameters}}, {{{ArgumentName}}}{{/each}})){{#if Paging}}.WithPaging({{PagingParameter.ArgumentName}}){{/if}}.SelectResultAsync<{{BaseReturnType}}CollectionResult, {{BaseReturnType}}Collection>({{#if Root.CancellationToken}}ct{{/if}}){{#if DataExtensions}}.ConfigureAwait(false){{/if}};
        {{else}}
            {{#ifor DataExtensions HasDataEvents}}{{#if HasReturnValue}}var __result = {{/if}}{{else}}{{#if HasReturnValue}}return {{/if}}{{/ifor}}{{#ifne Type 'Get'}}await {{else}}{{#if DataExtensions}}await {{/if}}{{/ifne}}{{DataArgs.Name}}.StoredProcedure("[{{Parent.DatabaseSchema}}].[{{DatabaseStoredProc}}]").{{Type}}Async({{DataEntityMapper}}.Default{{#if HasValue}}, value?? throw new ArgumentNullException(nameof(value)){{/if}}{{#each ValueLessDataParameters}}{{#if @first}}, CompositeKey.Create({{else}}, {{/if}}{{ParameterConverted}}{{#if @last}}){{/if}}{{/each}}{{#if Root.CancellationToken}}, cancellationToken{{/if}}){{#ifne Type 'Get'}}.ConfigureAwait(false){{/ifne}};
        {{/ifeq}}
      {{/ifeq}}
      {{#ifeq AutoImplement 'EntityFramework'}}
        {{#ifeq Type 'GetColl'}}
            {{#if DataExtensions}}var __result = await{{else}}return{{/if}} {{DataArgs.Name}}.Query<{{BaseReturnType}}, {{Parent.EntityFrameworkModel}}>(q => {{PrivateName}}OnQuery?.Invoke(q{{#each CoreDataParameters}}, {{{ArgumentName}}}{{/each}}) ?? q){{#if Paging}}.WithPaging({{PagingParameter.ArgumentName}}){{/if}}.SelectResultAsync<{{BaseReturnType}}CollectionResult, {{BaseReturnType}}Collection>({{#if Root.CancellationToken}}ct{{/if}}){{#if DataExtensions}}.ConfigureAwait(false){{/if}};
        {{else}}
            {{#ifor DataExtensions HasDataEvents}}{{#if HasReturnValue}}var __result = {{/if}}{{else}}{{#if HasReturnValue}}return {{/if}}{{/ifor}}{{#ifne Type 'Get'}}await {{else}}{{#if DataExtensions}}await {{/if}}{{/ifne}}{{DataArgs.Name}}.{{Type}}Async<{{#ifeq BaseReturnType 'void'}}{{Parent.EntityName}}{{else}}{{BaseReturnType}}{{/ifeq}}, {{Parent.EntityFrameworkModel}}>({{#if HasValue}}value?? throw new ArgumentNullException(nameof(value)){{#ifne ValueLessDataParameters.Count 0}}, {{/ifne}}{{/if}}{{#each ValueLessDataParameters}}{{#if @first}}{{#if Root.CancellationToken}}CompositeKey.Create({{/if}}{{/if}}{{ParameterConverted}}{{#if @last}}{{#if Root.CancellationToken}}){{/if}}{{else}}), {{/if}}{{/each}}{{#if Root.CancellationToken}}, ct{{/if}}){{#ifne Type 'Get'}}.ConfigureAwait(false){{/ifne}};
        {{/ifeq}}
      {{/ifeq}}
      {{#ifeq AutoImplement 'Cosmos'}}
        {{#ifeq Type 'GetColl'}}
            {{#if DataExtensions}}var __result = await{{else}}return{{/if}} {{DataArgs.Name}}.{{CosmosContainerId}}.Query({{#ifval CosmosPartitionKeyCode}}{{CosmosPartitionKeyCode}}, {{/ifval}}q => {{PrivateName}}OnQuery?.Invoke(q{{#each CoreDataParameters}}, {{{ArgumentName}}}{{/each}}) ?? q){{#if Paging}}.WithPaging({{PagingParameter.ArgumentName}}){{/if}}.SelectResultAsync<{{BaseReturnType}}CollectionResult, {{BaseReturnType}}Collection>({{#if Root.CancellationToken}}ct{{/if}}){{#if DataExtensions}}.ConfigureAwait(false){{/if}};
        {{else}}
            {{#ifor DataExtensions HasDataEvents}}{{#if HasReturnValue}}var __result = {{/if}}{{else}}{{#if HasReturnValue}}return {{/if}}{{/ifor}}{{#ifne Type 'Get'}}await {{else}}{{#if DataExtensions}}await {{/if}}{{/ifne}}{{DataArgs.Name}}.{{CosmosContainerId}}.{{Type}}Async({{#if HasValue}}value?? throw new ArgumentNullException(nameof(value)){{#ifne ValueLessDataParameters.Count 0}}, {{/ifne}}{{/if}}{{#each ValueLessDataParameters}}{{#unless @first}}, {{/unless}}{{ParameterConverted}}{{/each}}{{#if Root.CancellationToken}}, ct{{/if}}){{#ifne Type 'Get'}}.ConfigureAwait(false){{/ifne}};
        {{/ifeq}}
      {{/ifeq}}
      {{#ifeq AutoImplement 'OData'}}
        {{#ifeq Type 'GetColl'}}
            __result.Collection = {{DataArgs.Name}}.Query<{{BaseReturnType}}, {{Parent.ODataModel}}>(__dataArgs, q => {{PrivateName}}OnQuery?.Invoke(q, {{#each CoreDataParameters}}{{{ArgumentName}}}, {{/each}}__dataArgs) ?? q).SelectQuery<{{BaseReturnType}}Collection>();
        {{else}}
            {{#unless DataExtensions}}{{#if HasDataEvents}}{{#if HasReturnValue}}var {{/if}}{{/if}}{{/unless}}{{#ifor DataExtensions HasDataEvents}}{{#if HasReturnValue}}__result = {{/if}}{{else}}{{#if HasReturnValue}}return {{/if}}{{/ifor}}await {{DataArgs.Name}}.{{Type}}Async<{{#ifeq BaseReturnType 'void'}}{{Parent.EntityName}}{{else}}{{BaseReturnType}}{{/ifeq}}, {{Parent.ODataModel}}>(__dataArgs{{#each PagingLessDataParameters}}, {{#if IsValueArg}}value ?? throw new ArgumentNullException(nameof(value)){{else}}{{ParameterConverted}}{{/if}}{{/each}}).ConfigureAwait(false);
        {{/ifeq}}
      {{/ifeq}}
      {{#ifeq AutoImplement 'HttpAgent'}}
            {{#unless DataExtensions}}{{#if HasDataEvents}}{{#if HasReturnValue}}var {{/if}}{{/if}}{{/unless}}{{#ifor DataExtensions HasDataEvents}}{{#if HasReturnValue}}__result = {{/if}}{{else}}{{#if HasReturnValue}}return {{/if}}{{/ifor}}{{HttpAgentSendStatement}}
      {{/ifeq}}
      {{#if DataExtensions}}
            await ({{PrivateName}}OnAfterAsync?.Invoke({{#if HasReturnValue}}__result{{/if}}{{#each CoreDataParameters}}{{#if @first}}{{#if Parent.HasReturnValue}}, {{/if}}{{else}}, {{/if}}{{ArgumentName}}{{/each}}) ?? Task.CompletedTask).ConfigureAwait(false);
      {{/if}}
      {{#ifeq EventPublish 'Data'}}
        {{#ifeq Events.Count 1}}
          {{#each Events}}
            _events.Publish{{#ifval Value}}Value{{/ifval}}Event({{#ifval Value}}{{Value}}, {{/ifval}}{{#ifval Source}}new Uri($"{{Source}}", UriKind.{{../../Root.EventSourceKind}}), {{/ifval}}$"{{Subject}}", "{{Action}}");
          {{/each}}
        {{else}}
          {{#ifeq Events.Count 0}}
          {{else}}
            _events.Publish(
            {{#each Events}}
                EventData.Create{{#ifval Value}}Value{{/ifval}}Event({{#ifval Value}}{{Value}}, {{/ifval}}{{#ifval Source}}new Uri($"{{Source}}", UriKind.{{../../Root.EventSourceKind}}), {{/ifval}}$"{{Subject}}", "{{Action}}")){{#if @last}});{{else}},{{/if}}
              {{#if @last}}

              {{/if}}
            {{/each}}
          {{/ifeq}}
        {{/ifeq}}
      {{/ifeq}}
      {{#if DataExtensions}}
        {{#if HasReturnValue}}
            return __result;
        {{/if}}
        }, new BusinessInvokerArgs { ExceptionHandler = {{PrivateName}}OnException{{#if DataTransaction}}, IncludeTransactionScope = true{{/if}}{{#ifeq EventPublish 'Data'}}, EventPublisher = _events{{/ifeq}} }{{#if Root.CancellationToken}}, cancellationToken{{/if}});
      {{else}}
        {{#if HasReturnValue}}
          {{#ifne Type 'GetColl'}}
            {{#if HasDataEvents}}
            return __result;
            {{/if}}
          {{/ifne}}
        {{/if}}
        }{{#if DataTransaction}}, new BusinessInvokerArgs { IncludeTransactionScope = true{{#ifeq EventPublish 'Data'}}, EventPublisher = _events{{/ifeq}} }{{else}}{{#ifeq EventPublish 'Data'}}, new BusinessInvokerArgs { EventPublisher = _events }{{/ifeq}}{{/if}}{{#if Root.CancellationToken}}, cancellationToken{{/if}});
      {{/if}}
    {{/unless}}
  {{/each}}
{{/ifne}}
{{#if UsesDatabase}}
  {{#unless DatabaseCustomMapper}}

        /// <summary>
        /// Provides the {{{EntityNameSeeComments}}} property and database column mapping.
        /// </summary>
        public partial class DbMapper : DatabaseMapper<{{EntityName}}, DbMapper>
        {
            /// <summary>
            /// Initializes a new instance of the <see cref="DbMapper"/> class.
            /// </summary>
            public DbMapper()
            {
    {{#ifval DatabaseMapperInheritsFrom}}
                InheritPropertiesFrom({{DatabaseMapperInheritsFrom}}.Default);
    {{/ifval}}
    {{#each DatabaseMapperProperties}}
                Property(s => s.{{DataMapperPropertyName}}{{#ifval DataName}}, "{{DataName}}"{{/ifval}}{{#ifne DataOperationTypes 'Any'}}, operationTypes: OperationTypes.{{DataOperationTypes}}{{/ifne}}){{#if UniqueKey}}.SetPrimaryKey({{#if DataAutoGenerated}}true{{else}}false{{/if}}){{/if}}{{#ifval DataConverterCode}}{{{DataConverterCode}}}{{/ifval}}{{#ifval DatabaseDbType}}.SetDbType(System.Data.DbType.{{DatabaseDbType}}){{/ifval}}{{#ifval DatabaseMapper}}.SetMapper({{DatabaseMapper}}.Default!){{/ifval}};
    {{/each}}
    {{#if HasDatabaseETagProperty}}
                Property(s => s.ETag, "RowVersion", operationTypes: OperationTypes.AnyExceptCreate).SetConverter(StringToBase64Converter.Default);
    {{/if}}
    {{#if  HasDatabaseChangeLogProperty}}
                Property(s => s.ChangeLog).SetMapper(ChangeLogDatabaseMapper.Default);
    {{/if}}
                DbMapperCtor();
            }
            
            partial void DbMapperCtor(); // Enables the DbMapper constructor to be extended.
        }
  {{/unless}}
{{/if}}
{{#if UsesEntityFramework}}
  {{#unless EntityFrameworkCustomMapper}}

        /// <summary>
        /// Provides the {{{EntityNameSeeComments}}} and Entity Framework {{{see-comments EntityFrameworkModel}}} <i>AutoMapper</i> mapping.
        /// </summary>
        public partial class EfMapperProfile : AutoMapper.Profile
        {
            /// <summary>
            /// Initializes a new instance of the <see cref="EfMapperProfile"/> class.
            /// </summary>
            public EfMapperProfile()
            {
                var s2d = CreateMap<{{EntityName}}, {{EntityFrameworkModel}}>();
    {{#each EntityFrameworkMapperProperties}}
                s2d.ForMember(d => d.{{#ifval DataName}}{{DataName}}{{else}}{{Name}}{{/ifval}}, o => o.{{#ifne DataOperationTypes 'Any'}}OperationTypes(OperationTypes.{{DataOperationTypes}}).{{/ifne}}{{#ifval MapperDataConverterName}}ConvertUsing({{MapperDataConverterName}}.ToDestination, {{else}}MapFrom({{/ifval}}s => s.{{DataMapperPropertyName}}));
    {{/each}}
    {{#if HasEntityFrameworkETagProperty}}
                s2d.ForMember(d => d.RowVersion, o => o.OperationTypes(OperationTypes.AnyExceptCreate).ConvertUsing(AutoMapperStringToBase64Converter.Default.ToDestination, s => s.ETag));
    {{/if}}
    {{#if HasEntityFrameworkChangeLogProperty}}
                s2d.ForMember(d => d.CreatedBy, o => o.OperationTypes(OperationTypes.AnyExceptUpdate).MapFrom(s => s.ChangeLog.CreatedBy));
                s2d.ForMember(d => d.CreatedDate, o => o.OperationTypes(OperationTypes.AnyExceptUpdate).MapFrom(s => s.ChangeLog.CreatedDate));
                s2d.ForMember(d => d.UpdatedBy, o => o.OperationTypes(OperationTypes.AnyExceptCreate).MapFrom(s => s.ChangeLog.UpdatedBy));
                s2d.ForMember(d => d.UpdatedDate, o => o.OperationTypes(OperationTypes.AnyExceptCreate).MapFrom(s => s.ChangeLog.UpdatedDate));
    {{/if}}

                var d2s = CreateMap<{{EntityFrameworkModel}}, {{EntityName}}>();
    {{#each EntityFrameworkAutoMapperProperties}}
                d2s.ForMember(s => s.{{DataMapperPropertyName}}, o => o.{{#ifeq EntityFrameworkMapper "Ignore"}}Ignore());{{else}}{{#ifne DataOperationTypes 'Any'}}OperationTypes(OperationTypes.{{DataOperationTypes}}).{{/ifne}}{{#ifval MapperDataConverterName}}ConvertUsing({{MapperDataConverterName}}.ToSource, {{else}}MapFrom({{/ifval}}d => d.{{#ifval DataName}}{{DataName}}{{else}}{{Name}}{{/ifval}}));{{/ifeq}}
    {{/each}}
    {{#if HasEntityFrameworkETagProperty}}
                d2s.ForMember(s => s.ETag, o => o.ConvertUsing(AutoMapperStringToBase64Converter.Default.ToSource, d => d.RowVersion));
    {{/if}}
    {{#if HasEntityFrameworkChangeLogProperty}}
                d2s.ForPath(s => s.ChangeLog.CreatedBy, o => o.MapFrom(d => d.CreatedBy));
                d2s.ForPath(s => s.ChangeLog.CreatedDate, o => o.MapFrom(d => d.CreatedDate));
                d2s.ForPath(s => s.ChangeLog.UpdatedBy, o => o.MapFrom(d => d.UpdatedBy));
                d2s.ForPath(s => s.ChangeLog.UpdatedDate, o => o.MapFrom(d => d.UpdatedDate));
    {{/if}}

                EfMapperProfileCtor(s2d, d2s);
            }

            partial void EfMapperProfileCtor(AutoMapper.IMappingExpression<{{EntityName}}, {{EntityFrameworkModel}}> s2d, AutoMapper.IMappingExpression<{{EntityFrameworkModel}}, {{EntityName}}> d2s); // Enables the constructor to be extended.
        }
  {{/unless}}
{{/if}}
{{#if UsesCosmos}}
  {{#unless CosmosCustomMapper}}

        /// <summary>
        /// Provides the {{{EntityNameSeeComments}}} and Entity Framework {{{see-comments CosmosModel}}} <i>AutoMapper</i> mapping.
        /// </summary>
        public partial class CosmosMapperProfile : AutoMapper.Profile
        {
            /// <summary>
            /// Initializes a new instance of the <see cref="CosmosMapperProfile"/> class.
            /// </summary>
            public CosmosMapperProfile()
            {
                var s2d = CreateMap<{{EntityName}}, {{CosmosModel}}>();
    {{#each CosmosAutoMapperProperties}}
                s2d.ForMember(d => d.{{#ifval DataName}}{{DataName}}{{else}}{{Name}}{{/ifval}}, o => o.{{#ifne DataOperationTypes 'Any'}}OperationTypes(OperationTypes.{{DataOperationTypes}}).{{/ifne}}{{#ifval MapperDataConverterName}}ConvertUsing({{MapperDataConverterName}}.ToDestination, {{else}}MapFrom({{/ifval}}s => s.{{DataMapperPropertyName}}));
    {{/each}}

                var d2s = CreateMap<{{CosmosModel}}, {{EntityName}}>();
    {{#each CosmosAutoMapperProperties}}
                d2s.ForMember(s => s.{{DataMapperPropertyName}}, o => o.{{#ifeq CosmosMapper "Ignore"}}Ignore());{{else}}{{#ifne DataOperationTypes 'Any'}}OperationTypes(OperationTypes.{{DataOperationTypes}}).{{/ifne}}{{#ifval MapperDataConverterName}}ConvertUsing({{MapperDataConverterName}}.ToSource, {{else}}MapFrom({{/ifval}}d => d.{{#ifval DataName}}{{DataName}}{{else}}{{Name}}{{/ifval}}));{{/ifeq}}
    {{/each}}

                CosmosMapperProfileCtor(s2d, d2s);
            }

            partial void CosmosMapperProfileCtor(AutoMapper.IMappingExpression<{{EntityName}}, {{CosmosModel}}> s2d, AutoMapper.IMappingExpression<{{CosmosModel}}, {{EntityName}}> d2s); // Enables the constructor to be extended.
        }
  {{/unless}}
{{/if}}
{{#if UsesOData}}
  {{#unless ODataCustomMapper}}

        /// <summary>
        /// Provides the {{{EntityNameSeeComments}}} and OData {{{see-comments ODataModel}}} <i>AutoMapper</i> mapping.
        /// </summary>
        public partial class ODataMapperProfile : AutoMapper.Profile
        {
            /// <summary>
            /// Initializes a new instance of the <see cref="ODataMapperProfile"/> class.
            /// </summary>
            public ODataMapperProfile()
            {
                var s2d = CreateMap<{{EntityName}}, {{ODataModel}}>();
    {{#each ODataMapperProperties}}
                s2d.ForMember(d => d.{{#ifval DataName}}{{DataName}}{{else}}{{Name}}{{/ifval}}, o => o.{{#ifne DataOperationTypes 'Any'}}OperationTypes(OperationTypes.{{DataOperationTypes}}).{{/ifne}}{{#ifval MapperDataConverterName}}ConvertUsing({{MapperDataConverterName}}.ToDestination, {{else}}MapFrom({{/ifval}}s => s.{{DataMapperPropertyName}}));
    {{/each}}

                var d2s = CreateMap<{{ODataModel}}, {{EntityName}}>();
    {{#each ODataMapperProperties}}
                d2s.ForMember(s => s.{{DataMapperPropertyName}}, o => o.{{#ifeq ODataMapper "Ignore"}}Ignore());{{else}}{{#ifne DataOperationTypes 'Any'}}OperationTypes(OperationTypes.{{DataOperationTypes}}).{{/ifne}}{{#ifval MapperDataConverterName}}ConvertUsing({{MapperDataConverterName}}.ToSource, {{else}}MapFrom({{/ifval}}d => d.{{#ifval DataName}}{{DataName}}{{else}}{{Name}}{{/ifval}}));{{/ifeq}}
    {{/each}}

                ODataMapperProfileCtor(s2d, d2s);
            }

            partial void ODataMapperProfileCtor(AutoMapper.IMappingExpression<{{EntityName}}, {{ODataModel}}> s2d, AutoMapper.IMappingExpression<{{ODataModel}}, {{EntityName}}> d2s); // Enables the constructor to be extended.
        }
  {{/unless}}
{{/if}}
{{#if UsesHttpAgent}}
  {{#unless HttpAgentCustomMapper}}

        /// <summary>
        /// Provides the {{{EntityNameSeeComments}}} and HttpAgent {{{see-comments HttpAgentModel}}} <i>AutoMapper</i> mapping.
        /// </summary>
        public partial class HttpAgentMapperProfile : AutoMapper.Profile
        {
            /// <summary>
            /// Initializes a new instance of the <see cref="HttpAgentMapperProfile"/> class.
            /// </summary>
            public HttpAgentMapperProfile()
            {
                var s2d = CreateMap<{{EntityName}}, {{HttpAgentModel}}>();
    {{#each HttpAgentMapperProperties}}
                s2d.ForMember(d => d.{{#ifval DataName}}{{DataName}}{{else}}{{Name}}{{/ifval}}, o => o.{{#ifne DataOperationTypes 'Any'}}OperationTypes(OperationTypes.{{DataOperationTypes}}).{{/ifne}}{{#ifval MapperDataConverterName}}ConvertUsing({{MapperDataConverterName}}.ToDestination, {{else}}MapFrom({{/ifval}}s => s.{{DataMapperPropertyName}}));
    {{/each}}

                var d2s = CreateMap<{{HttpAgentModel}}, {{EntityName}}>();
    {{#each HttpAgentMapperProperties}}
                d2s.ForMember(s => s.{{DataMapperPropertyName}}, o => o.{{#ifeq HttpAgentMapper "Ignore"}}Ignore());{{else}}{{#ifne DataOperationTypes 'Any'}}OperationTypes(OperationTypes.{{DataOperationTypes}}).{{/ifne}}{{#ifval MapperDataConverterName}}ConvertUsing({{MapperDataConverterName}}.ToSource, {{else}}MapFrom({{/ifval}}d => d.{{#ifval DataName}}{{DataName}}{{else}}{{Name}}{{/ifval}}));{{/ifeq}}
    {{/each}}

                HttpAgentMapperProfileCtor(s2d, d2s);
            }

            partial void HttpAgentMapperProfileCtor(AutoMapper.IMappingExpression<{{EntityName}}, {{HttpAgentModel}}> s2d, AutoMapper.IMappingExpression<{{HttpAgentModel}}, {{EntityName}}> d2s); // Enables the constructor to be extended.
        }
  {{/unless}}
{{/if}}
    }
}

#pragma warning restore
#nullable restore