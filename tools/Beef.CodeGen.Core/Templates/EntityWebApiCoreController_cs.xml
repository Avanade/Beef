<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (c) Avanade. Licensed under the MIT License. See https://github.com/Avanade/Beef -->
<Template OutputGenDirName="Generated">
  <Entity>
    <Set Name="System.EntityName" Value="Entity.Name" />
    <Set Name="System.EntityExclude" Condition="Entity.ExcludeWebApi == null and Entity.ExcludeAll == null and Entity.OperationCount == 0" Value="true" Otherwise="false" />
    <Set Name="System.EntityExclude" Condition="Entity.ExcludeWebApi == true or Entity.ExcludeAll == true" Value="true" />
    <Entity Condition="System.EntityExclude == false and Entity.Name == System.EntityName and Entity.EntityScope == 'Common'" OutputFileName="{{Entity.Name}}Controller.cs">
      <Exception Condition="Entity.GenericWithT == true" Message="Entity '{{Entity.Name}}' specifies GenericWithT which is not supported for a Controller; use a non-generic class instead." />
      <![CDATA[/*
 * This file is automatically generated; any changes will be lost. 
 */

#nullable enable

using System;
using System.Collections.Generic;
using System.Net;
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;
using Newtonsoft.Json.Linq;
using Beef;
using Beef.AspNetCore.WebApi;
using Beef.Entities;
using {{Config.Company}}.{{Config.AppName}}.Business;
using {{Config.Company}}.{{Config.AppName}}.Common.Entities;
]]>
      <If Condition="Config.RefDataNamespace != null">
        <![CDATA[using RefDataNamespace = {{Config.RefDataNamespace}};
]]>
      </If>
      <![CDATA[
namespace {{Config.Company}}.{{Config.AppName}}.{{Config.ApiName}}.Controllers
{
    /// <summary>
    /// Provides the <b>{{Entity.Name}}</b> API functionality.
    /// </summary>
]]>
      <Set Name="System.WebApiAuthorize" Value="null" />
      <If Condition="Config.WebApiAuthorize == 'Authorize'">
        <Set Name="System.WebApiAuthorize" Value="'Authorize'" />
      </If>
      <If Condition="Config.WebApiAuthorize == 'AllowAnonymous'">
        <Set Name="System.WebApiAuthorize" Value="'AllowAnonymous'" />
      </If>
      <If Condition="Entity.WebApiAuthorize == 'Authorize'">
        <Set Name="System.WebApiAuthorize" Value="'Authorize'" />
      </If>
      <If Condition="Entity.WebApiAuthorize == 'AllowAnonymous'">
        <Set Name="System.WebApiAuthorize" Value="'AllowAnonymous'" />
      </If>
      <If Condition="System.WebApiAuthorize != null">
        <![CDATA[    [{{System.WebApiAuthorize}}]
]]>
      </If>
      <If Condition="Entity.WebApiRoutePrefix != null">
        <![CDATA[    [Route("{{Entity.WebApiRoutePrefix}}")]
]]>
      </If>
      <![CDATA[    public partial class {{Entity.Name}}Controller : ControllerBase
    {
]]>
      <If Condition="Entity.OperationCount > 0">
        <Operation Condition="Operation.ExcludeWebApi == false and Operation.ExcludeAll == false">
          <If Condition="System.Index > 0">
            <![CDATA[
]]>
          </If>
          <![CDATA[        /// <summary>
]]>
          <If Condition="Operation.Text == null">
            <Then>
              <If Condition="Operation.OperationType == 'GetColl'">
                <![CDATA[        /// Gets the ]]>
                <If Condition="Operation.ReturnType == 'void'">
                  <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
                  <Else><![CDATA[{{Operation.ReturnType:ToSeeComments}}]]></Else>
                </If>
                <![CDATA[ collection entity that matches the selection criteria.
]]>
              </If>
              <If Condition="Operation.OperationType == 'Get'">
                <![CDATA[        /// Gets the ]]>
                <If Condition="Operation.ReturnType == 'void'">
                  <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
                  <Else><![CDATA[{{Operation.ReturnType:ToSeeComments}}]]></Else>
                </If>
                <![CDATA[ entity that matches the selection criteria.
]]>
              </If>
              <If Condition="Operation.OperationType == 'Create'">
                <![CDATA[        /// Creates the {{Entity.Name:ToSeeComments}} entity.
]]>
              </If>
              <If Condition="Operation.OperationType == 'Update'">
                <![CDATA[        /// Updates the ]]>
                <If Condition="Operation.ValueType == null">
                  <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
                  <Else><![CDATA[{{Operation.ValueType:ToSeeComments}}]]></Else>
                </If>
                <![CDATA[ entity.
]]>
              </If>
              <If Condition="Operation.OperationType == 'Patch'">
                <![CDATA[        /// Patches the ]]>
                <If Condition="Operation.ValueType == null">
                  <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
                  <Else><![CDATA[{{Operation.ValueType:ToSeeComments}}]]></Else>
                </If>
                <![CDATA[ entity.
]]>
              </If>
              <If Condition="Operation.OperationType == 'Delete'">
                <![CDATA[        /// Deletes the ]]>
                <If Condition="Operation.ValueType == null">
                  <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
                  <Else><![CDATA[{{Operation.ValueType:ToSeeComments}}]]></Else>
                </If>
                <![CDATA[ entity that matches the selection criteria.
]]>
              </If>
              <If Condition="Operation.OperationType == 'Custom'">
                <![CDATA[        /// ???
]]>
              </If>
            </Then>
            <Else>
              <![CDATA[        /// {{Operation.Text:ToComments}}.
]]>
            </Else>
          </If>
          <![CDATA[        /// </summary>
]]>
          <If Condition="Operation.OperationType == 'Create' or Operation.OperationType == 'Update'">
            <![CDATA[        /// <param name="value">The ]]>
            <If Condition="Operation.ValueType == null">
              <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
              <Else><![CDATA[{{Operation.ValueType:ToSeeComments}}]]></Else>
            </If>
            <![CDATA[ entity.</param>
]]>
          </If>
          <If Condition="Operation.OperationType == 'Patch'">
            <![CDATA[        /// <param name="value">The <see cref="JToken"/> value that contains the patch content for the entity.</param>
]]>
          </If>

          <Parameter>
            <If Condition="Parameter.WebApiFrom == null">
              <Set Name="System.MakeFromUriUseProperties" Value="false"/>
              <Set Name="System.PropertyType" Value="Parameter.Type" />
              <Entity FullSearch="true" Condition="Entity.Name == System.PropertyType">
                <Set Name="System.MakeFromUriUseProperties" Value="true"/>
              </Entity>
              <Set Name="Parameter.WebApiFrom" Condition="System.MakeFromUriUseProperties == true" Value="'FromEntityProperties'"/>
            </If>
          </Parameter>

          <Parameter>
            <If Condition="Parameter.WebApiFrom == 'FromUriUseProperties' or Parameter.WebApiFrom == 'FromEntityProperties'">
              <Then>
                <Set Name="System.PropertyType" Value="Parameter.Type" />
                <Entity FullSearch="true" Condition="Entity.Name == System.PropertyType">
                  <Property>
                    <![CDATA[        /// <param name="{{Property.ArgumentName}}">The {{Property.Text:ToComments}}.</param>
]]>
                  </Property>
                </Entity>
              </Then>
              <Else>
                <If Condition="Parameter.Text == null">
                  <Then>
                    <![CDATA[        /// <param name="{{Parameter.ArgumentName}}">???</param>
]]>
                  </Then>
                  <Else>
                    <![CDATA[        /// <param name="{{Parameter.ArgumentName}}">The {{Parameter.Text:ToComments}}.</param>
]]>
                  </Else>
                </If>
              </Else>
            </If>
          </Parameter>
          <If Condition="Operation.OperationType == 'GetColl'">
            <If Condition="Operation.ReturnType == 'void'">
              <Then>
                <![CDATA[        /// <returns>A <see cref="{{Entity.Name}}Collection"/>.</returns>
]]>
              </Then>
              <Else>
                <![CDATA[        /// <returns>A <see cref="{{Operation.ReturnType}}Collection"/>.</returns>
]]>
              </Else>
            </If>
            <If Condition="Operation.WebApiAuthorize != null">
              <![CDATA[        [{{Operation.WebApiAuthorize}}]
]]>
            </If>
            <![CDATA[        [HttpGet()]
]]>
            <If Condition="Operation.WebApiRoute != null">
              <![CDATA[        [Route("{{Operation.WebApiRoute}}")]
]]>
            </If>
            <![CDATA[        [ProducesResponseType(typeof(]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}Collection]]></Then>
              <Else><![CDATA[{{Operation.ReturnType}}Collection]]></Else>
            </If>
            <![CDATA[), (int)HttpStatusCode.]]>
            <If Condition="Operation.WebApiStatus != null">
              <Then><![CDATA[{{Operation.WebApiStatus}}]]></Then>
              <Else><![CDATA[OK]]></Else>
            </If>
            <![CDATA[)]]]>
            <If Condition="Operation.WebApiAlternateStatus != 'ThrowException'">
              <![CDATA[
        [ProducesResponseType((int)HttpStatusCode.]]>
              <If Condition="Operation.WebApiAlternateStatus != null">
                <Then><![CDATA[{{Operation.WebApiAlternateStatus}}]]></Then>
                <Else><![CDATA[NoContent]]></Else>
              </If>
              <![CDATA[)]]]>
            </If>
            <![CDATA[
        public IActionResult {{Operation.Name}}(]]>
          </If>
          <If Condition="Operation.OperationType == 'Get'">
            <![CDATA[        /// <returns>The selected ]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType:ToSeeComments}}]]></Else>
            </If>
            <![CDATA[ entity where found.</returns>
        [HttpGet()]
]]>
            <If Condition="Operation.WebApiAuthorize != null">
              <![CDATA[        [{{Operation.WebApiAuthorize}}]
]]>
            </If>
            <If Condition="Operation.WebApiRoute != null">
              <![CDATA[        [Route("{{Operation.WebApiRoute}}")]
]]>
            </If>
            <![CDATA[        [ProducesResponseType(typeof(]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType:Remove('?')}}]]></Else>
            </If>
            <![CDATA[), (int)HttpStatusCode.]]>
            <If Condition="Operation.WebApiStatus != null">
              <Then><![CDATA[{{Operation.WebApiStatus}}]]></Then>
              <Else><![CDATA[OK]]></Else>
            </If>
            <![CDATA[)]
        [ProducesResponseType((int)HttpStatusCode.]]>
            <If Condition="Operation.WebApiStatus != null">
              <Then><![CDATA[{{Operation.WebApiStatus}}]]></Then>
              <Else><![CDATA[NotFound]]></Else>
            </If>
            <![CDATA[)]
        public IActionResult {{Operation.Name}}(]]>
          </If>
          <If Condition="Operation.OperationType == 'Create'">
            <![CDATA[        /// <returns>The created ]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType:ToSeeComments}}]]></Else>
            </If>
            <![CDATA[ entity.</returns>
        [HttpPost()]
]]>
            <If Condition="Operation.WebApiAuthorize != null">
              <![CDATA[        [{{Operation.WebApiAuthorize}}]
]]>
            </If>
            <If Condition="Operation.WebApiRoute != null">
              <![CDATA[        [Route("{{Operation.WebApiRoute}}")]
]]>
            </If>
            <![CDATA[        [ProducesResponseType(typeof(]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType:Remove('?')}}]]></Else>
            </If>
            <![CDATA[), (int)HttpStatusCode.]]>
            <If Condition="Operation.WebApiStatus != null">
              <Then><![CDATA[{{Operation.WebApiStatus}}]]></Then>
              <Else><![CDATA[Created]]></Else>
            </If>
            <![CDATA[)]
        public IActionResult {{Operation.Name}}([FromBody] ]]>
            <If Condition="Operation.ValueType == null">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ValueType}}]]></Else>
            </If>
            <![CDATA[ value]]>
          </If>
          <If Condition="Operation.OperationType == 'Update'">
            <![CDATA[        /// <returns>The updated ]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType:ToSeeComments}}]]></Else>
            </If>
            <![CDATA[ entity.</returns>
        [HttpPut()]
]]>
            <If Condition="Operation.WebApiAuthorize != null">
              <![CDATA[        [{{Operation.WebApiAuthorize}}]
]]>
            </If>
            <If Condition="Operation.WebApiRoute != null">
              <![CDATA[        [Route("{{Operation.WebApiRoute}}")]
]]>
            </If>
            <![CDATA[        [ProducesResponseType(typeof(]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType::Remove('?')}}]]></Else>
            </If>
            <![CDATA[), (int)HttpStatusCode.]]>
            <If Condition="Operation.WebApiStatus != null">
              <Then><![CDATA[{{Operation.WebApiStatus}}]]></Then>
              <Else><![CDATA[OK]]></Else>
            </If>
            <![CDATA[)]
        public IActionResult {{Operation.Name}}([FromBody] ]]>
            <If Condition="Operation.ValueType == null">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ValueType}}]]></Else>
            </If>
            <![CDATA[ value]]>
          </If>
          <If Condition="Operation.OperationType == 'Patch'">
            <![CDATA[        /// <returns>The patched ]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name:ToSeeComments}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType:ToSeeComments}}]]></Else>
            </If>
            <![CDATA[ entity.</returns>
        [HttpPatch()]
]]>
            <If Condition="Operation.WebApiAuthorize != null">
              <![CDATA[        [{{Operation.WebApiAuthorize}}]
]]>
            </If>
            <If Condition="Operation.WebApiRoute != null">
              <![CDATA[        [Route("{{Operation.WebApiRoute}}")]
]]>
            </If>
            <![CDATA[        [ProducesResponseType(typeof(]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType::Remove('?')}}]]></Else>
            </If>
            <![CDATA[), (int)HttpStatusCode.]]>
            <If Condition="Operation.WebApiStatus != null">
              <Then><![CDATA[{{Operation.WebApiStatus}}]]></Then>
              <Else><![CDATA[OK]]></Else>
            </If>
            <![CDATA[)]
        public IActionResult {{Operation.Name}}([FromBody] JToken value]]>
          </If>
          <If Condition="Operation.OperationType == 'Delete'">
            <![CDATA[        [HttpDelete()]
]]>
            <If Condition="Operation.WebApiAuthorize != null">
              <![CDATA[        [{{Operation.WebApiAuthorize}}]
]]>
            </If>
            <If Condition="Operation.WebApiRoute != null">
              <![CDATA[        [Route("{{Operation.WebApiRoute}}")]
]]>
            </If>
            <![CDATA[        [ProducesResponseType((int)HttpStatusCode.]]>
            <If Condition="Operation.WebApiStatus != null">
              <Then><![CDATA[{{Operation.WebApiStatus}}]]></Then>
              <Else><![CDATA[NoContent]]></Else>
            </If>
            <![CDATA[)]
        public IActionResult {{Operation.Name}}(]]>
          </If>
          <If Condition="Operation.OperationType == 'Custom'">
            <If Condition="Operation.WebApiAuthorize != null">
              <![CDATA[        [{{Operation.WebApiAuthorize}}]
]]>
            </If>
            <If Condition="Operation.ReturnType == 'void'">
              <Then>
                <If Condition="Operation.WebApiMethod == null">
                  <Then>
                    <![CDATA[        [HttpPost]
]]>
                  </Then>
                  <Else>
                    <![CDATA[        [{{Operation.WebApiMethod}}]
]]>
                  </Else>
                </If>
                <If Condition="Operation.WebApiRoute != null">
                  <![CDATA[        [Route("{{Operation.WebApiRoute}}")]
]]>
                </If>
                <![CDATA[        [ProducesResponseType((int)HttpStatusCode.]]>
                <If Condition="Operation.WebApiStatus != null">
                  <Then><![CDATA[{{Operation.WebApiStatus}}]]></Then>
                  <Else><![CDATA[NoContent]]></Else>
                </If>
                <![CDATA[)]
        public IActionResult {{Operation.Name}}(]]>
              </Then>
              <Else>
                <![CDATA[        /// <returns>{{Operation.ReturnText:ToComments}}</returns>
]]>
                <If Condition="Operation.WebApiMethod == null">
                  <Then>
                    <![CDATA[        [HttpPost]
]]>
                  </Then>
                  <Else>
                    <![CDATA[        [{{Operation.WebApiMethod}}]
]]>
                  </Else>
                </If>
                <If Condition="Operation.WebApiRoute != null">
                  <![CDATA[        [Route("{{Operation.WebApiRoute}}")]
]]>
                </If>
                <![CDATA[        [ProducesResponseType(typeof({{Operation.ReturnType:Remove('?')}}), (int)HttpStatusCode.]]>
                <If Condition="Operation.WebApiStatus != null">
                  <Then><![CDATA[{{Operation.WebApiStatus}}]]></Then>
                  <Else><![CDATA[OK]]></Else>
                </If>
                <![CDATA[)]]]>
                <If Condition="Operation.WebApiAlternateStatus != 'ThrowException'">
                  <![CDATA[
        [ProducesResponseType((int)HttpStatusCode.]]>
                  <If Condition="Operation.WebApiAlternateStatus != null">
                    <Then><![CDATA[{{Operation.WebApiAlternateStatus}}]]></Then>
                    <Else><![CDATA[NoContent]]></Else>
                  </If>
                  <![CDATA[)]]]>
                </If>
                <![CDATA[
        public IActionResult {{Operation.Name}}(]]>
              </Else>
            </If>
          </If>
          <Parameter>
            <Set Name="System.NeedsComma" Value="false" />
            <If Condition="System.Index == 0">
              <Then>
                <If Condition="Operation.OperationType == 'Create' or Operation.OperationType == 'Update' or Operation.OperationType == 'Patch'">
                  <![CDATA[, ]]>
                  <Set Name="System.NeedsComma" Value="true" />
                </If>
              </Then>
              <Else>
                <![CDATA[, ]]>
              </Else>
            </If>
            <If Condition="Parameter.WebApiFrom == 'FromUriUseProperties' or Parameter.WebApiFrom == 'FromEntityProperties'">
              <Then>
                <Set Name="System.PropertyType" Value="Parameter.Type" />
                <Entity FullSearch="true" Condition="Entity.Name == System.PropertyType">
                  <Property>
                    <If Condition="System.NeedsComma == true">
                      <![CDATA[, ]]>
                    </If>
                    <If Condition="Property.JsonName != null and Property.JsonName != Property.ArgumentName">
                      <![CDATA[[FromQuery(Name = "{{Property.JsonName}}")] ]]>
                    </If>
                    <If Condition="Property.RefDataType == null">
                      <Then>
                        <![CDATA[{{Property.Type}}]]>
                      </Then>
                      <Else>
                        <If Condition="Property.RefDataList == true">
                          <Then><![CDATA[List<{{Property.RefDataType}}>]]></Then>
                          <Else><![CDATA[{{Property.RefDataType}}]]></Else>
                        </If>
                      </Else>
                    </If>
                    <If Condition="Property.Nullable == true">
                      <![CDATA[?]]>
                    </If>
                    <![CDATA[ {{Property.ArgumentName}}]]>
                    <If Condition="Property.Default == null">
                      <Then>
                        <![CDATA[ = default]]>
                      </Then>
                      <Else><![CDATA[ = {{Property.Default}}]]></Else>
                    </If>
                    <Set Name="System.NeedsComma" Value="true" />
                  </Property>
                </Entity>
              </Then>
              <Else>
                <If Condition="Parameter.WebApiFrom == null or Parameter.WebApiFrom == 'FromQuery'">
                  <Then>
                    <If Condition="Parameter.JsonName != null and Parameter.JsonName != Parameter.ArgumentName">
                      <![CDATA[[FromQuery(Name = "{{Property.JsonName}}")] ]]>
                    </If>
                  </Then>
                  <Else>
                    <If Condition="Parameter.WebApiFrom == 'FromUriJsonBinder'">
                      <Then><![CDATA[[ModelBinder(typeof(FromUriJsonBinder))] ]]></Then>
                      <Else><![CDATA[[{{Parameter.WebApiFrom}}] ]]></Else>
                    </If>
                  </Else>
                </If>
                <If Condition="Parameter.RefDataType == null">
                  <Then><![CDATA[{{Parameter.Type}}]]></Then>
                  <Else><![CDATA[{{Parameter.RefDataType}}]]></Else>
                </If>
                <If Condition="Parameter.Nullable == true">
                  <![CDATA[?]]>
                </If>
                <![CDATA[ {{Parameter.ArgumentName}}]]>
                <If Condition="Parameter.Default != null">
                  <Then>
                    <![CDATA[ = {{Parameter.Default}}]]>
                  </Then>
                </If>
              </Else>
            </If>
          </Parameter>
          <![CDATA[)
        {
]]>
          <Parameter Condition="Parameter.WebApiFrom == 'FromUriUseProperties' or Parameter.WebApiFrom == 'FromEntityProperties'">
            <![CDATA[            var {{Parameter.ArgumentName}} = new {{Parameter.Type}} { ]]>
            <Entity FullSearch="true" Condition="Entity.Name == System.PropertyType">
              <Property>
                <If Condition="System.Index > 0">
                  <![CDATA[, ]]>
                </If>
                <![CDATA[{{Property.Name}}]]>
                <If Condition="Property.RefDataType != null">
                  <If Condition="Property.RefDataList == true">
                    <Then><![CDATA[Sids]]></Then>
                    <Else><![CDATA[Sid]]></Else>
                  </If>
                </If>
                <![CDATA[ = {{Property.ArgumentName}}]]>
              </Property>
            </Entity>
            <![CDATA[ };
]]>
          </Parameter>
          <![CDATA[            return new ]]>
          <If Condition="Operation.OperationType == 'Get'">
            <![CDATA[WebApiGet<]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}?]]></Then>
              <Else><![CDATA[{{Operation.ReturnType}}?]]></Else>
            </If>
            <![CDATA[>(this, ]]>
          </If>
          <If Condition="Operation.OperationType == 'GetColl'">
            <![CDATA[WebApiGet<]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}CollectionResult]]></Then>
              <Else><![CDATA[{{Operation.ReturnType}}CollectionResult]]></Else>
            </If>
            <![CDATA[, ]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}Collection]]></Then>
              <Else><![CDATA[{{Operation.ReturnType}}Collection]]></Else>
            </If>
            <![CDATA[, ]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType}}]]></Else>
            </If>
            <![CDATA[>(this, ]]>
          </If>
          <If Condition="Operation.OperationType == 'Create'">
            <![CDATA[WebApiPost<]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType}}]]></Else>
            </If>
            <![CDATA[>(this, ]]>
          </If>
          <If Condition="Operation.OperationType == 'Update'">
            <![CDATA[WebApiPut<]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType}}]]></Else>
            </If>
            <![CDATA[>(this, ]]>
          </If>
          <If Condition="Operation.OperationType == 'Patch'">
            <![CDATA[WebApiPatch<]]>
            <If Condition="Operation.ReturnType == 'void'">
              <Then><![CDATA[{{Entity.Name}}]]></Then>
              <Else><![CDATA[{{Operation.ReturnType}}]]></Else>
            </If>
            <If Condition="Operation.PatchGetOperation == null">
              <Then><![CDATA[>(this, value, () => Factory.Create<I{{Entity.Name}}Manager>().GetAsync(]]></Then>
              <Else>
                <Set Name="System.Part1" Value="null" />
                <Set Name="System.Part2" Value="null" />
                <ForEachList Name="Operation.PatchGetOperation" Separator=".">
                  <If Condition="System.Index == 0">
                    <Then>
                      <Set Name="System.Part1" Value="System.Value" />
                    </Then>
                    <Else>
                      <Set Name="System.Part2" Value="System.Value" />
                    </Else>
                  </If>
                </ForEachList>
                <If Condition="System.Part2 == null">
                  <Then><![CDATA[>(this, value, () => Factory.Create<I{{Entity.Name}}Manager>().{{System.Part1}}Async(]]></Then>
                  <Else><![CDATA[>(this, value, () => Factory.Create<I{{System.Part1}}>().{{System.Part2}}Async(]]></Else>
                </If>
              </Else>
            </If>
            <Parameter>
              <If Condition="System.Index > 0">
                <![CDATA[, ]]>
              </If>
              <![CDATA[{{Parameter.ArgumentName}}]]>
            </Parameter>
            <![CDATA[), ]]>
          </If>
          <If Condition="Operation.OperationType == 'Delete'">
            <![CDATA[WebApiDelete(this, ]]>
          </If>
          <If Condition="Operation.OperationType == 'Custom'">
            <If Condition="Operation.WebApiMethod == 'HttpPut'">
              <![CDATA[WebApiPut]]>
              <If Condition="Operation.ReturnType != 'void'">
                <![CDATA[<{{Operation.ReturnType}}>]]>
              </If>
            </If>
            <If Condition="Operation.WebApiMethod == null or Operation.WebApiMethod == 'HttpPost'">
              <![CDATA[WebApiPost]]>
              <If Condition="Operation.ReturnType != 'void'">
                <![CDATA[<{{Operation.ReturnType}}>]]>
              </If>
            </If>
            <If Condition="Operation.WebApiMethod == 'HttpGet'">
              <![CDATA[WebApiGet]]>
              <If Condition="Operation.ReturnType != 'void'">
                <![CDATA[<{{Operation.ReturnType}}>]]>
              </If>
            </If>
            <If Condition="Operation.WebApiMethod == 'HttpDelete'">
              <![CDATA[WebApiDelete]]>
              <If Condition="Operation.ReturnType != 'void'">
                <![CDATA[<{{Operation.ReturnType}}>]]>
              </If>
            </If>
            <![CDATA[(this, ]]>
          </If>
          <If Condition="Operation.OperationType == 'Patch'">
            <Then>
              <If Condition="Operation.PatchUpdateOperation == null">
                <Then><![CDATA[(__value) => Factory.Create<I{{Entity.Name}}Manager>().UpdateAsync(]]></Then>
                <Else>
                  <Set Name="System.Part1" Value="null" />
                  <Set Name="System.Part2" Value="null" />
                  <ForEachList Name="Operation.PatchUpdateOperation" Separator=".">
                    <If Condition="System.Index == 0">
                      <Then><Set Name="System.Part1" Value="System.Value" /></Then>
                      <Else><Set Name="System.Part2" Value="System.Value" /></Else>
                    </If>
                  </ForEachList>
                  <If Condition="System.Part2 == null">
                    <Then><![CDATA[(__value) => Factory.Create<I{{Entity.Name}}Manager>().{{System.Part1}}Async(]]></Then>
                    <Else><![CDATA[(__value) => Factory.Create<I{{System.Part1}}>().{{System.Part2}}Async(]]></Else>
                  </If>
                </Else>
              </If>
            </Then>
            <Else><![CDATA[() => Factory.Create<I{{Entity.Name}}Manager>().{{Operation.Name}}Async(]]></Else>
          </If>
          <If Condition="Operation.OperationType == 'Create' or Operation.OperationType == 'Update'">
            <![CDATA[WebApiActionBase.Value(value)]]>
          </If>
          <If Condition="Operation.OperationType == 'Patch'">
            <![CDATA[__value]]>
          </If>
          <Parameter>
            <If Condition="System.Index == 0">
              <Then>
                <If Condition="Operation.OperationType == 'Create' or Operation.OperationType == 'Update' or Operation.OperationType == 'Patch'">
                  <![CDATA[, ]]>
                </If>
              </Then>
              <Else>
                <![CDATA[, ]]>
              </Else>
            </If>
            <![CDATA[{{Parameter.ArgumentName}}]]>
          </Parameter>
          <If Condition="Operation.OperationType == 'GetColl' and Operation.PagingArgs == true">
            <If Condition="Operation.ParameterCount > 0">
              <![CDATA[, ]]>
            </If>
            <![CDATA[WebApiQueryString.CreatePagingArgs(this)]]>
          </If>
          <![CDATA[),
                operationType: OperationType.]]>
          <If Condition="Operation.WebApiOperationType != null">
            <Then><![CDATA[{{Operation.WebApiOperationType}}]]></Then>
            <Else>
              <If Condition="Operation.OperationType == 'Get'"><![CDATA[Read]]></If>
              <If Condition="Operation.OperationType == 'GetColl'"><![CDATA[Read]]></If>
              <If Condition="Operation.OperationType == 'Create'"><![CDATA[Create]]></If>
              <If Condition="Operation.OperationType == 'Update'"><![CDATA[Update]]></If>
              <If Condition="Operation.OperationType == 'Patch'"><![CDATA[Update]]></If>
              <If Condition="Operation.OperationType == 'Delete'"><![CDATA[Delete]]></If>
              <If Condition="Operation.OperationType == 'Custom'"><![CDATA[Unspecified]]></If>
            </Else>
          </If>
          <![CDATA[, statusCode: HttpStatusCode.]]>
          <If Condition="Operation.WebApiStatus != null">
            <Then>
              <![CDATA[{{Operation.WebApiStatus}}]]>
            </Then>
            <Else>
              <If Condition="Operation.OperationType == 'Get'"><![CDATA[OK]]></If>
              <If Condition="Operation.OperationType == 'GetColl'"><![CDATA[OK]]></If>
              <If Condition="Operation.OperationType == 'Create'"><![CDATA[Created]]></If>
              <If Condition="Operation.OperationType == 'Update'"><![CDATA[OK]]></If>
              <If Condition="Operation.OperationType == 'Patch'"><![CDATA[OK]]></If>
              <If Condition="Operation.OperationType == 'Delete'"><![CDATA[NoContent]]></If>
              <If Condition="Operation.OperationType == 'Custom'">
                <If Condition="Operation.ReturnType == 'void'">
                  <Then><![CDATA[NoContent]]></Then>
                  <Else><![CDATA[OK]]></Else>
                </If>
              </If>
            </Else>
          </If>
          <If Condition="Operation.OperationType == 'Delete' or Operation.OperationType == 'Custom'">
            <Then>
              <If Condition="Operation.ReturnType != 'void'">
                <![CDATA[, alternateStatusCode: ]]>
                <If Condition="Operation.WebApiAlternateStatus != null">
                  <Then>
                    <If Condition="Operation.WebApiAlternateStatus == 'ThrowException'">
                      <Then><![CDATA[null]]></Then>
                      <Else><![CDATA[HttpStatusCode.{{Operation.WebApiAlternateStatus}}]]></Else>
                    </If>
                  </Then>
                  <Else>
                    <![CDATA[HttpStatusCode.NoContent]]>
                  </Else>
                </If>
              </If>
            </Then>
            <Else>
              <![CDATA[, alternateStatusCode: ]]>
              <If Condition="Operation.WebApiAlternateStatus != null">
                <Then>
                  <If Condition="Operation.WebApiAlternateStatus == 'ThrowException'">
                    <Then><![CDATA[null]]></Then>
                    <Else><![CDATA[HttpStatusCode.{{Operation.WebApiAlternateStatus}}]]></Else>
                  </If>
                </Then>
                <Else>
                  <If Condition="Operation.OperationType == 'Get'"><![CDATA[HttpStatusCode.NotFound]]></If>
                  <If Condition="Operation.OperationType == 'GetColl'"><![CDATA[HttpStatusCode.NoContent]]></If>
                  <If Condition="Operation.OperationType == 'Create'"><![CDATA[null]]></If>
                  <If Condition="Operation.OperationType == 'Update'"><![CDATA[null]]></If>
                  <If Condition="Operation.OperationType == 'Patch'"><![CDATA[null]]></If>
                </Else>
              </If>
            </Else>
          </If>
          <![CDATA[);
        }
]]>
        </Operation>
      </If>
      <![CDATA[    }
}

#nullable restore]]>
    </Entity>
  </Entity>
</Template>